{% extends 'base.html' %}

{% block head %}
    <title>{% block title %}{% endblock %}</title>


    <script>
        var elements = document.getElementsByClassName("column");
        var i;

        var filter = 'nofilters';

        //alert(filter);
        console.log(filter);

        function listView() {
            for (i = 0; i < elements.length; i++) {
                elements[i].style.width = "100%";
            }
        }
        function gridView() {
            for (i = 0; i < elements.length; i++) {
                elements[i].style.width = "25%";
            }
        }
        function getLink(inputstring) {
            var linkstring = ""
            linkstring = linkstring.concat(inputstring.replace(/\W/g, ''));
            return linkstring
        }

       function getFilter(){
           // alert('hit getfilter')
            return filter;
        }


       function setfilterbase(filterbase){
            filter = filterbase;
           // alert('inside setfilterbase');
            //alert(filter);
       }

    function  buildFilterString(newfilter){
            //alert('Hit buildfilter');
            filter =  filter.concat(newfilter);
            //alert(filter);
        }

        function PeekCheckBoxBuildString() {
  // Get the checkbox
  var checkBox1 = document.getElementById("checkbox1");
  var checkBox2 = document.getElementById("checkbox2");
  var checkBox3 = document.getElementById("checkbox3");
  var checkBox4 = document.getElementById("checkbox4");
  var checkBox5 = document.getElementById("checkbox5");
  var checkBox6 = document.getElementById("checkbox6");
  var checkBox7 = document.getElementById("checkbox7");

    var checkBox8 =  document.getElementById("checkbox8");
    var checkBox9 = document.getElementById("checkbox9");
    var checkBox10 =  document.getElementById("checkbox10");
    var checkBox11 =  document.getElementById("checkbox11");
    var checkBox12 =  document.getElementById("checkbox12");

    var checkBox13 =  document.getElementById("checkbox13");
    var checkBox14 =  document.getElementById("checkbox14");
    var checkBox15 =  document.getElementById("checkbox15");
    var checkBox16 =  document.getElementById("checkbox16");
    var checkBox17 =  document.getElementById("checkbox17");
    var checkBox18 =  document.getElementById("checkbox18");
    var checkBox19 =  document.getElementById("checkbox19");

  // If the checkbox is checked, display the output text

if (checkBox1.checked == true){       buildFilterString('1_Hour_or_More');}
if (checkBox2.checked == true){       buildFilterString('1_Hour_or_Less');}
if (checkBox3.checked == true){       buildFilterString('30_Minutes_or_Less'); }
if (checkBox4.checked == true){       buildFilterString( 'Players:_2');}
if (checkBox5.checked == true){       buildFilterString('Players:_3');}
if (checkBox6.checked == true){       buildFilterString('Players:_4'); }
if (checkBox7.checked == true){       buildFilterString('Players:_5 +'); }


if (checkBox8.checked == true){       buildFilterString('Average_Price:_$30_or_More');}
if (checkBox9.checked == true){       buildFilterString('Average_Price:_$30_or_Less');}
if (checkBox10.checked == true){      buildFilterString('Average_Price:_$15_or_Less');}
if (checkBox11.checked == true){      buildFilterString('Average_Playtime:_30_minutes_or_Less');}
if (checkBox12.checked == true){      buildFilterString('Average_Playtime:_30_minutes_or_More');}

if (checkBox13.checked == true){       buildFilterString('Average_Price:_$30_or_More_Double');}
if (checkBox14.checked == true){       buildFilterString('Average_Price:_$30_or_Less_Publisher');}
if (checkBox15.checked == true){       buildFilterString('Average_Price:_$15_or_Less_Publisher');}
if (checkBox16.checked == true){       buildFilterString('Average_Playtime:_30_minutes_or_Less');}
if (checkBox17.checked == true){        buildFilterString('Average_Playtime:_30_minutes_or_More');}


  }

        function link(page_route, sort, page, filter){
            return '/' + page_route + '/' + sort + '/' + page + '/' + filter;
        }

        function linkResetFilter(page_route, sort, page, filter){
            return '/' + page_route + '/' + sort + '/' + page + '/' + filter;
        }

    function linkandBuildString(){
      PeekCheckBoxBuildString(); //This will look at what is checked and build the string accordingly
      window.location.href = link('{{page_route}}', '{{sort_type}}', '1', getFilter() );
      //need to hard code to page 1, to not get empty page on restrictive filters.
      //We always go to page 1 on any filters application.
      //have to call link after PeeckCheckBoxBuildString so that getFilter gets the filter based on checkedboxes.


      }

    function Testfunc(){ alert('hit test funct'); }


     function TurnOffGameFilter() {
        document.getElementById("FiltersForGames").style.display = "none";
            }

               function TurnOffGenreFilter() {
        document.getElementById("FiltersForGenres").style.display = "none";
            }

            function TurnOffPublisherFilter() {
        document.getElementById("FiltersForPublisher").style.display = "none";
            }

        function dropdownStayDown() {
            document.getElementById('FiltersForGames').addEventListener('click', function (event) {
    event.stopPropagation();}); }

    </script>
    <style>
        .row{
            width: 100%; justify-content: center; padding: 5% 5%; max-height: 50%;
        }
        .list{
            color: #bf6402;
            font-size: medium;
            font-family: Cambria;
            text-align: left;
            text-anchor: start;
        }
        .list2{
            color: black;
            font-size: large;
            font-family: Cambria;
            text-align: left;
            text-anchor: start;
        }
        [title="main"]{
            justify-content: center;
            color: #3e5d85;
            font-size: larger;
            font-family: Cambria;
            text-align: center;
            text-anchor: middle;
        }
        [title="list"]{
            color: #bf6402;
            font-size: medium;
            font-family: Cambria;
            text-align: left;
            text-anchor: start;
        }
        [title="list2"]{
            color: black;
            font-size: large;
            font-family: Cambria;
            text-align: left;
            text-anchor: start;
        }
        [title="list_button"]{
            color: #3e5d85;
            border-radius: 8px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.18);
        }

    </style>
{% endblock %}

{% block bodywithmargin %}
    <h1 style = "font-size:30px; padding-top:100px; padding-bottom: 25px; padding-left: 30px;">{% block pagetitle %}{% endblock %} Page {{ page }}</h1>
<div style="margin-left:60px;">
    <h3>
        View Style:
        <button title="list_button" onclick="listView()">List</button>

        <button title="list_button" onclick="gridView()">Grid</button>
    </h3>
</div>

<h5></h5>

<div class="dropdown" style="margin-left:60px;">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="sort_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sorting</button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        {% if sort_type != 'normal' %}<button class="btn btn-link list2" onclick="window.location.href = link('{{page_route}}', 'normal', '{{page}}', '{{filters}}')">normal</button>{% endif %}
        {% if sort_type != 'alphabetical' %}<button class="btn btn-link list2" onclick="window.location.href = link('{{page_route}}', 'alphabetical', '{{page}}', '{{filters}}')">A-Z</button>{% endif %}
        {% if sort_type != 'inverse' %}<button class="btn btn-link list2" onclick="window.location.href = link('{{page_route}}', 'inverse', '{{page}}', '{{filters}}')">Z-A</button>{% endif %}
        {% if sort_type != 'min-playtime' %}<button class="btn btn-link list2" onclick="window.location.href = link('{{page_route}}', 'min-playtime', '{{page}}', '{{filters}}')">Minimum Playtime</button>{% endif %}
        {% if sort_type != 'min-players' %}<button class="btn btn-link list2" onclick="window.location.href = link('{{page_route}}', 'min-players', '{{page}}', '{{filters}}')">Minimum Players</button>{% endif %}

        {% block sorts %}{% endblock %}
    </div>
</div>



<div class="dropdown" style="margin-left:60px;">
  <!-- Basic dropdown -->
  <button class="btn btn-primary dropdown-toggle " type="button" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false" id = "FiltersForGames" >Filters for Games</button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">

    <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox1"   onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox1">1 Hour or More</label>
      </div>
        </a>

    <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox2"  onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox2">1 Hour or Less </label>
      </div>
    </a>
    <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox3"  onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox3">30 Minutes or Less</label>
      </div>
    </a>

    <a class="dropdown-item" href="#">
  <div class="custom-control custom-checkbox">
    <input type="checkbox" class="custom-control-input" id="checkbox4"   onclick="linkandBuildString()">
    <label class="custom-control-label" for="checkbox4">Players: 2</label>
  </div>
</a>

 <a class="dropdown-item" href="#">
<div class="custom-control custom-checkbox">
<input type="checkbox" class="custom-control-input" id="checkbox5" onclick="linkandBuildString()" >
<label class="custom-control-label" for="checkbox5">Players: 3 </label>
</div>
</a>

      <a class="dropdown-item" href="#">
<div class="custom-control custom-checkbox">
<input type="checkbox" class="custom-control-input" id="checkbox6"  onclick="linkandBuildString()">
<label class="custom-control-label" for="checkbox6">Players: 4 </label>
</div>
</a>

           <a class="dropdown-item" href="#">
<div class="custom-control custom-checkbox">
<input type="checkbox" class="custom-control-input" id="checkbox7" onclick="linkandBuildString()" >
<label class="custom-control-label" for="checkbox7">Players: 5+</label>
</div>
</a>
      <a class="dropdown-item" href="#">
  <div class="custom-control custom-checkbox">
      <button class="btn btn-link" title="list2" onclick=" window.location.href = link('{{page_route}}', '{{sort_type}}', '{{page}}', 'nofilters' )">No Filters</button>
  </div>
</a>
</div>
  <!-- Basic dropdown -->
    </div>
</div>



<div class="dropdown" style="margin-left:60px;">
  <!-- Basic dropdown -->
  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false" id = "FiltersForGenres">Filters for Genres</button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">

 <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox8"  onclick="linkandBuildString()"  >
        <label class="custom-control-label" for="checkbox8">Average Price: $30 or More</label>
      </div>
        </a>

    <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox9"  onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox9">Average Price: $30 or Less</label>
      </div>
    </a>

       <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox10" onclick="linkandBuildString()" >
        <label class="custom-control-label" for="checkbox10">Average Price: $15 or Less</label>
      </div>
    </a>

        <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox11" onclick="linkandBuildString()" >
        <label class="custom-control-label" for="checkbox11">Average Playtime: 30 minutes or Less</label>
      </div>
    </a>

        <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox12"  onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox12">Average Playtime: 30 minutes or More</label>
      </div>
    </a>

      <a class="dropdown-item" href="#">
  <div class="custom-control custom-checkbox">
      <button class="btn btn-link" title="list2" onclick=" window.location.href = link('{{page_route}}', '{{sort_type}}', '{{page}}', 'nofilters' )">No Filters</button>
  </div>
</a>
</div>
  <!-- Basic dropdown -->

    </div>
</div>


<div class="dropdown" style="margin-left:60px;">
  <!-- Basic dropdown -->
  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false" id = "FiltersForPublisher" >Filters for Publishers</button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">


        <a class="dropdown-item" href="#">
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox13"  onclick="linkandBuildString()">
        <label class="custom-control-label" for="checkbox13">Average Price: $30 or More</label>
      </div>
    </a>


    <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox14" onclick="linkandBuildString()"  >
        <label class="custom-control-label" for="checkbox14">Average Price: $30 or Less</label>
      </div>
        </a>

       <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox15"  onclick="linkandBuildString()" >
        <label class="custom-control-label" for="checkbox15">Average Price: $15 or Less</label>
      </div>
        </a>


  <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox16"  onclick="linkandBuildString()" >
        <label class="custom-control-label" for="checkbox16">Average Playtime: 30 minutes or Less</label>
      </div>
        </a>

  <a class="dropdown-item" href="#">
      <!-- Default unchecked -->
      <div class="custom-control custom-checkbox">
        <input type="checkbox" class="custom-control-input" id="checkbox17" onclick="linkandBuildString()"  >
        <label class="custom-control-label" for="checkbox17">Average Playtime: 30 minutes or More</label>
      </div>
        </a>


      <a class="dropdown-item" href="#">
  <div class="custom-control custom-checkbox">
      <button class="btn btn-link" title="list2" onclick=" window.location.href = link('{{page_route}}', '{{sort_type}}', '{{page}}', 'nofilters' )">No Filters</button>
  </div>
</a>
</div>
  <!-- Basic dropdown -->

    </div>
</div>




{% if page_route == 'boardgamegenres' %}
<script>

TurnOffGameFilter();
TurnOffPublisherFilter();
</script>
{% endif %}

{% if page_route == 'boardgames' %}
<script>
TurnOffPublisherFilter();
TurnOffGenreFilter();


</script>
{% endif %}

{% if page_route == 'boardgamepublishers' %}
<script>
TurnOffGameFilter();
TurnOffGenreFilter();
</script>
{% endif %}


{% if empty%}
<script>
TooManyFilters();
</script>
<p style="text-align:center">No Results to show: Too many filters were applied and we found no results. Please reset Filters or use less filters.</p>
{% endif %}



<h5></h5>
<nav aria-label="Page nav" style="margin-left: 60px;">
  <ul class="pagination">
      {% if page != 1 %}
    <li class="page-item"><a class="page-link" onclick="window.location.href = link('{{page_route}}', '{{sort_type}}', '{{page-1}}, '{{filters}}')">Previous</a></li>
      {% endif %}
      {% for i in range(1, max_pages+1) %}
        {% if i == page %}
         <li class="page-item active"><a class="page-link" onclick="window.location.href = link('{{page_route}}', '{{sort_type}}', '{{i}}', '{{filters}}')">{{ i }}</a></li>
        {% else %}
         <li class="page-item"><a class="page-link" onclick="window.location.href = link('{{page_route}}', '{{sort_type}}', '{{i}}', '{{filters}}')">{{ i }}</a></li>
        {% endif %}
      {% endfor %}
      {% if page != max_pages %}
    <li class="page-item"><a class="page-link" onclick="window.location.href = link('{{page_route}}', '{{sort_type}}', '{{page+1}}', '{{filters}}')">Next</a></li>
      {% endif %}
  </ul>
</nav>
{% block body %}{% endblock %}
{% endblock %}